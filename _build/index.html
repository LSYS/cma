<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="LSYS">
<meta name="dcterms.date" content="2023-11-08">

<title>pagetitle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://www.lucasshen.com" rel="" target="_blank"><i class="bi bi-house-up-fill" role="img" aria-label="Home directory">
</i> 
 <span class="menu-text">Back to Homepage</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.lucasshen.com/notes" rel="" target="_blank"><i class="bi bi-journal-code" role="img" aria-label="Other Notes">
</i> 
 <span class="menu-text">Other notes</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lsys/cma" rel="" target="_blank"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools tools-wide">
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="./Cma.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="./Cma.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="./Cma.docx">
              <i class="bi bi-bi-file-word pe-1"></i>
            Download Docx
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#statement-of-need" id="toc-statement-of-need" class="nav-link active" data-scroll-target="#statement-of-need">Statement of need</a></li>
  <li><a href="#sec-un-mediated-treatment-effects" id="toc-sec-un-mediated-treatment-effects" class="nav-link" data-scroll-target="#sec-un-mediated-treatment-effects">(Un-mediated) Treatment effects</a></li>
  <li><a href="#mediation-through-the-lens-of-potential-outcomes" id="toc-mediation-through-the-lens-of-potential-outcomes" class="nav-link" data-scroll-target="#mediation-through-the-lens-of-potential-outcomes">Mediation through the lens of potential outcomes</a></li>
  <li><a href="#set-a-adte-and-aite" id="toc-set-a-adte-and-aite" class="nav-link" data-scroll-target="#set-a-adte-and-aite">Set A: ADTE and AITE</a></li>
  <li><a href="#set-b-adtet-and-aitec" id="toc-set-b-adtet-and-aitec" class="nav-link" data-scroll-target="#set-b-adtet-and-aitec">Set B: ADTET and AITEC</a></li>
  <li><a href="#sec-classical-ma" id="toc-sec-classical-ma" class="nav-link" data-scroll-target="#sec-classical-ma">Classical mediation approach</a></li>
  <li><a href="#sec-classical-mediation" id="toc-sec-classical-mediation" class="nav-link" data-scroll-target="#sec-classical-mediation">Classical mediation approach: Common grounds</a></li>
  <li><a href="#sec-bias-bounds-assumptions" id="toc-sec-bias-bounds-assumptions" class="nav-link" data-scroll-target="#sec-bias-bounds-assumptions">Biases, bounds, and assumptions</a></li>
  <li><a href="#mediation-and-instrumental-variables" id="toc-mediation-and-instrumental-variables" class="nav-link" data-scroll-target="#mediation-and-instrumental-variables">Mediation and instrumental variables</a></li>
  <li><a href="#mediation-with-moderation" id="toc-mediation-with-moderation" class="nav-link" data-scroll-target="#mediation-with-moderation">Mediation with moderation</a></li>
  <li><a href="#application-example-jobs-ii" id="toc-application-example-jobs-ii" class="nav-link" data-scroll-target="#application-example-jobs-ii">Application example: JOBS II</a></li>
  <li><a href="#endnote" id="toc-endnote" class="nav-link" data-scroll-target="#endnote">Endnote</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  <li><a href="#supplementary-appendix" id="toc-supplementary-appendix" class="nav-link" data-scroll-target="#supplementary-appendix">Supplementary appendix</a>
  <ul class="collapse">
  <li><a href="#sec-trends" id="toc-sec-trends" class="nav-link" data-scroll-target="#sec-trends">Trends in mediation analysis</a></li>
  <li><a href="#sec-si-classical-mediation" id="toc-sec-si-classical-mediation" class="nav-link" data-scroll-target="#sec-si-classical-mediation">Classical mediation approach: ADTE, ADTET, AITEC</a></li>
  <li><a href="#sec-bias-bounds-assumptions-algebra" id="toc-sec-bias-bounds-assumptions-algebra" class="nav-link" data-scroll-target="#sec-bias-bounds-assumptions-algebra">Biases, bounds, and assumptions: Algebraic version</a></li>
  <li><a href="#sec-heterogeneities" id="toc-sec-heterogeneities" class="nav-link" data-scroll-target="#sec-heterogeneities">Heterogeneities in mediation effect</a></li>
  <li><a href="#mediation-with-moderation-direct-effect" id="toc-mediation-with-moderation-direct-effect" class="nav-link" data-scroll-target="#mediation-with-moderation-direct-effect">Mediation with moderation: Direct effect</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cma</h1>
<p class="subtitle lead">Subtitle</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>LSYS </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 8, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="hidden">

$$
\newcommand{\ind}{\perp\!\!\!\!\perp} 
$$

$$
\newcommand{\E}{\mathbb E}
$$
</div>
<p>z<strong>passes</strong></p>
<ul class="task-list">
<li><input type="checkbox">use trends of(GS + psychinfo)</li>
<li><input type="checkbox">check writing (stopped at endnote)</li>
<li><input type="checkbox" checked="">figure out footnotes</li>
<li><input type="checkbox">figure out preambles</li>
<li><input type="checkbox">navbar icon hover text (tooltip)</li>
<li><input type="checkbox" checked="">make certain | bigger</li>
<li><input type="checkbox" checked="">get trends of ma pubmed</li>
<li><input type="checkbox" checked="">make graph of AITEC + ADTET</li>
<li><input type="checkbox" checked="">prove AITE [PO]</li>
<li><input type="checkbox" checked="">prove AITE [Algebra]</li>
<li><input type="checkbox" checked="">product-coef from PO</li>
<li><input type="checkbox" checked="">direct effect from PO (supp)</li>
<li><input type="checkbox" checked="">Add GH icon</li>
<li><input type="checkbox" checked="">change expectations</li>
<li><input type="checkbox" checked="">use the delta and eta definitions of direct + indirect effects</li>
<li><input type="checkbox" checked="">Change math delimiters</li>
<li><input type="checkbox" checked="">Heterogeneities</li>
<li><input type="checkbox" checked="">Moderation + mediation</li>
<li><input type="checkbox" checked="">Instruments</li>
<li><input type="checkbox" checked="">Fix all the DAGs and make the style consistent</li>
<li><input type="checkbox" checked="">brief note on the temporality of</li>
<li><input type="checkbox" checked="">pass through figure captions</li>
<li><input type="checkbox" checked="">pass to see where <code>syn</code> makes sense</li>
<li><input type="checkbox" checked="">fix intro</li>
<li><input type="checkbox" checked="">fix endnote</li>
<li><input type="checkbox" checked="">double check seq ignorability</li>
<li><input type="checkbox" checked="">mediation with moderation (with direct effects)</li>
<li><input type="checkbox" checked="">JII application example</li>
<li><input type="checkbox" checked="">Digraph hover names</li>
</ul>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Statement of need -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<section id="statement-of-need" class="level2">
<h2 class="anchored" data-anchor-id="statement-of-need">Statement of need</h2>
<p>Mediation analysis is not new <span class="citation" data-cites="Judd1981-rn">(<a href="index.html#ref-Judd1981-rn" role="doc-biblioref">Judd and Kenny 1981</a>)</span>. But it is to me. Mediation analysis aims to shed light on mechanisms between some exposure and some outcomes of interest. It’s an ambitious aim but has potential implementational and policy implications. Funding agencies (e.g., National Institute of Mental Health, NIH) for research grants encourage or require mediation analyses of interventions to understand mechanisms <span class="citation" data-cites="Nguyen2021-oj">(<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>)</span>. Since results from mediation analysis may influence policy and practice, I thought I should at least gain some literacy on it. “Mediation analysis” is also increasingly popular. <strong>FIGURE</strong> should sum up this statement of need.</p>
<!-- Some notes on treatment effects -->
</section>
<section id="sec-un-mediated-treatment-effects" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-un-mediated-treatment-effects">(Un-mediated) Treatment effects</h2>
<p>First, to set some context with the causal inference approach with (model-agnostic) potential outcomes (<code>PO</code>) without mediation. In a simple setup with just treatment <span class="math inline">\(T\)</span> and an outcome of interest <span class="math inline">\(Y\)</span> (without the mediator <span class="math inline">\(M\)</span> for now), the main estimand of interest is the average treatment effect (<code>ATE</code>) defined as <span id="eq-ate"><span class="math display">\[
\tau \equiv \E\big[Y(1)\big] - \E\big[Y(0)\big],
\tag{1}\]</span></span></p>
<p>for the simplest scenario where <span class="math inline">\(T\)</span> is a binary split: <span class="math display">\[
T = \begin{cases}
1 &amp; \text{if treated}, \\
0 &amp; \text{if untreated}.
\end{cases}
\]</span></p>
<div class="page-columns page-full"><p><span class="math inline">\(Y(1)\)</span> is the potential outcome with treatment (<span class="math inline">\(T=1\)</span>) and <span class="math inline">\(Y(0)\)</span> is the potential outcome without treatment (<span class="math inline">\(T=0\)</span>). For a given individual, only <span class="math inline">\(Y(1)\)</span> is observed with treatment. <span class="math inline">\(Y(0)\)</span> is the counterfactual.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Aka missing data as the ‘’Fundamental Problem of Causal Inference’’ <span class="citation" data-cites="Holland1986-yr">(<a href="index.html#ref-Holland1986-yr" role="doc-biblioref">Holland 1986</a>)</span>.</p></li></div></div>
<div class="cell page-columns page-full" data-fig-width="280px" data-fig-height="100px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-ate-dag" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="280" height="100" viewbox="0.00 0.00 206.00 67.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 63)">
<title>
ATE
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-63 202,-63 202,4 -4,4"></polygon> <!-- d --> <g id="node1" class="node">
<title>
d
</title>
</g> <!-- Y --> <g id="node3" class="node">
<title>
Y
</title>
<ellipse fill="none" stroke="black" cx="180" cy="-18" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="180" y="-15" font-family="Times,serif" font-size="10.00">Y</text> </g> <!-- d&#45;&gt;Y --> <!-- T --> <g id="node2" class="node">
<title>
T
</title>
<ellipse fill="none" stroke="black" cx="18" cy="-18" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="18" y="-15" font-family="Times,serif" font-size="10.00">T</text> </g> <!-- T&#45;&gt;d --> <!-- T&#45;&gt;Y --> <g id="edge3" class="edge">
<title>
T-&gt;Y
</title>
<path fill="none" stroke="black" d="M36.27,-18C64.22,-18 117.86,-18 151.12,-18"></path> <polygon fill="black" stroke="black" points="151.55,-21.5 161.55,-18 151.55,-14.5 151.55,-21.5"></polygon> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;1: Graph for the typical estimand of interest for <span class="math inline">\(T\)</span> and <span class="math inline">\(Y\)</span>—the average treatment effect (<code>ATE</code>, <a href="#eq-ate">Equation&nbsp;<span>1</span></a>). Arrows imply causality.</figcaption>
</figure>
</div>
</div></div></div>
<p>In reality, all we observe are outcomes conditional on the treatment <span class="math inline">\([Y|T=t]\)</span> and the <em>statistical solution</em> <span class="citation" data-cites="Holland1986-yr">(<a href="index.html#ref-Holland1986-yr" role="doc-biblioref">Holland 1986</a>)</span> is via differences in averages <span class="math display">\[
\E\big[Y \big|T=1\big] - \E\big[Y\big|T=0\big]
\]</span></p>
<div class="page-columns page-full"><p>which reduces to <a href="#eq-ate">Equation&nbsp;<span>1</span></a> under certain conditions such as the <code>independence assumption</code>:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;The conditional analog is similar for some baseline set of observables <span class="math inline">\(\textbf{X}\)</span>: <span class="math inline">\(\big[Y_i(t) \ind T_i\big] \Big| \textbf{X}_i\)</span> <span class="citation" data-cites="Imbens2004-tp Angrist2009-oz">(e.g., <a href="index.html#ref-Imbens2004-tp" role="doc-biblioref">Imbens 2004</a>; <a href="index.html#ref-Angrist2009-oz" role="doc-biblioref">Angrist and Pischke 2009</a>)</span>. <em>This vignette will largely abstract away from <span class="math inline">\(\textbf{X}\)</span> for simplicity.</em></p></li></div></div>
<p><span id="eq-independence-assumption"><span class="math display">\[
Y_i(t)  \ind T_i.
\tag{2}\]</span></span></p>
<p>The simplest way to estimate <span class="math inline">\(\tau\)</span>, given the assumptions are met, is <span class="math display">\[
Y_i = \alpha + \tau T_i + \varepsilon_i.
\]</span></p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Mediation through the lens of potential outcomes -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="mediation-through-the-lens-of-potential-outcomes" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="mediation-through-the-lens-of-potential-outcomes">Mediation through the lens of potential outcomes</h2>
<div class="page-columns page-full"><p>I was wondering how mediation analysis fits into this barebones potential outcomes framework. Most publications with mediation analysis are in the Baron and Kenny tradition <span class="citation" data-cites="Judd1981-rn Baron1986-zn MacKinnon2012-jl">(<a href="index.html#ref-Judd1981-rn" role="doc-biblioref">Judd and Kenny 1981</a>; <a href="index.html#ref-Baron1986-zn" role="doc-biblioref">Baron and Kenny 1986</a>; <a href="index.html#ref-MacKinnon2012-jl" role="doc-biblioref">MacKinnon 2012</a>)</span> (hereafter, the classical mediation approach). Inherent in mediation analysis, whether made explicit or not, is a causal hypothesis <span class="citation" data-cites="Nguyen2021-oj">(<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>)</span>. T causes Y through M. There is, however, nothing in the mechanics of the classical approach that guarantees that uni-direction.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;A “mediation analysis” without this explicit path (partly implied by the temporal ordering) is really just a “third variable analysis”, which is an analysis of association <span class="citation" data-cites="Nguyen2021-oj">(<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>)</span>.</p></li></div></div>
<div class="page-columns page-full"><p>So mediation could benefit from, or deserves, explicit causal thinking <span class="citation" data-cites="Nguyen2021-oj">(<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>)</span>.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Work to think of mediation in the causal inference framework started as early as <span class="citation" data-cites="Robins1992-ty">Robins and Greenland (<a href="index.html#ref-Robins1992-ty" role="doc-biblioref">1992</a>)</span> and as recent (at time of writing) as <span class="citation" data-cites="Stuart2022-bm">Stuart et al. (<a href="index.html#ref-Stuart2022-bm" role="doc-biblioref">2022</a>)</span> (hereafter the causal inference approach).<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> With a proposed mediation path through a variable <span class="math inline">\(M\)</span>, the analog of the <code>ATE</code> (from <a href="#eq-ate">Equation&nbsp;<span>1</span></a>) is now: <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;This is different from other regular regression analyses, where, depending on the target and assumptions, both causal and conditional association interpretations are valid <span class="citation" data-cites="Nguyen2021-oj">(<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>)</span>.</p></li><li id="fn5"><p><sup>5</sup>&nbsp;Separate issue of temporal ordering of T, M, and Y (not covered in this vignette. See P49 of Stuart et al 2021 for more references.)</p></li><li id="fn6"><p><sup>6</sup>&nbsp;This PO notation is similar to that in <span class="citation" data-cites="Imbens2004-tp">Imbens (<a href="index.html#ref-Imbens2004-tp" role="doc-biblioref">2004</a>)</span>, <span class="citation" data-cites="Angrist2009-oz">Angrist and Pischke (<a href="index.html#ref-Angrist2009-oz" role="doc-biblioref">2009</a>)</span>, <span class="citation" data-cites="Imai2010-tg">Kosuke Imai, Keele, and Tingley (<a href="index.html#ref-Imai2010-tg" role="doc-biblioref">2010</a>)</span>; <span class="citation" data-cites="Nguyen2021-oj">Nguyen, Schmid, and Stuart (<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">2021</a>)</span>, etc. <span class="citation" data-cites="Pearl2001-ct">Pearl (<a href="index.html#ref-Pearl2001-ct" role="doc-biblioref">2001</a>)</span>, <span class="citation" data-cites="whatif">Hernan and Robins (<a href="index.html#ref-whatif" role="doc-biblioref">2023</a>)</span>, etc., have slightly different PO notations.</p></li></div></div>
<p><span id="eq-ate2"><span class="math display">\[
\tau = \E\big[Y\left(1, M(1)\right)\big] - \E\big[Y(0, M(0))\big],
\tag{3}\]</span></span> where (like <span class="math inline">\(T\)</span>) the simplest scenario is: <span class="math display">\[
M = \begin{cases}
1 &amp; \text{if T = 1}, \\
0 &amp; \text{if T = 0},
\end{cases}
\]</span> where the value of the mediator <span class="math inline">\(M\)</span> also depends on <span class="math inline">\(T\)</span>.</p>
<div class="cell page-columns page-full" data-fig-width="320px" data-fig-height="95px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-mediation" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="320" height="95" viewbox="0.00 0.00 188.00 67.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 63)">
<title>
Mediation
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-63 184,-63 184,4 -4,4"></polygon> <!-- M --> <g id="node1" class="node">
<title>
M
</title>
<ellipse fill="none" stroke="black" cx="90" cy="-41" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="90" y="-38" font-family="Times,serif" font-size="10.00">M</text> </g> <!-- Y --> <g id="node2" class="node">
<title>
Y
</title>
<ellipse fill="none" stroke="black" cx="162" cy="-18" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="162" y="-15" font-family="Times,serif" font-size="10.00">Y</text> </g> <!-- M&#45;&gt;Y --> <g id="edge1" class="edge">
<title>
M-&gt;Y
</title>
<path fill="none" stroke="black" d="M107.24,-35.67C117.25,-32.37 130.18,-28.13 140.84,-24.62"></path> <polygon fill="black" stroke="black" points="141.42,-25.72 144.37,-23.47 140.66,-23.39 141.42,-25.72"></polygon> </g> <!-- T --> <g id="node3" class="node">
<title>
T
</title>
<ellipse fill="none" stroke="black" cx="18" cy="-18" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="18" y="-15" font-family="Times,serif" font-size="10.00">T</text> </g> <!-- T&#45;&gt;M --> <g id="edge3" class="edge">
<title>
T-&gt;M
</title>
<path fill="none" stroke="black" d="M35.24,-23.33C45.25,-26.63 58.18,-30.87 68.84,-34.38"></path> <polygon fill="black" stroke="black" points="68.66,-35.61 72.37,-35.53 69.42,-33.28 68.66,-35.61"></polygon> </g> <!-- T&#45;&gt;Y --> <g id="edge2" class="edge">
<title>
T-&gt;Y
</title>
<path fill="none" stroke="black" d="M36.24,-18C62.75,-18 111.85,-18 140.22,-18"></path> <polygon fill="black" stroke="black" points="140.41,-19.23 143.91,-18 140.41,-16.78 140.41,-19.23"></polygon> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;2: Graph of mediation analysis. The path between T and Y is the direct effect (<a href="#eq-direct-estimand">Equation&nbsp;<span>4</span></a>). The mediation effect is captured from <span class="math inline">\(T\)</span> to <span class="math inline">\(M\)</span> and then <span class="math inline">\(M\)</span> to <span class="math inline">\(Y\)</span> (<a href="#eq-indirect-estimand">Equation&nbsp;<span>5</span></a>).</figcaption>
</figure>
</div>
</div></div></div>
<div class="page-columns page-full"><p>From the total effect (<a href="#eq-ate2">Equation&nbsp;<span>3</span></a>),<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> we can start decomposing into the direct and indirect effects.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> Apparently, there are two different sets of estimands <span class="citation" data-cites="Nguyen2021-oj">(<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>)</span>. No one told me that…</p><div class="no-row-height column-margin column-container"><li id="fn7"><p><sup>7</sup>&nbsp;The <em>total effect</em> (<code>TE</code>) is used in place of the <code>ATE</code> in the language of mediation analysis <span class="citation" data-cites="Judd1981-rn Robins1992-ty Imai2010-fu Bullock2010-vb Nguyen2021-oj whatif">(e.g., <a href="index.html#ref-Judd1981-rn" role="doc-biblioref">Judd and Kenny 1981</a>; <a href="index.html#ref-Robins1992-ty" role="doc-biblioref">Robins and Greenland 1992</a>; <a href="index.html#ref-Imai2010-fu" role="doc-biblioref">K. Imai, Keele, and Yamamoto 2010</a>; <a href="index.html#ref-Bullock2010-vb" role="doc-biblioref">Bullock, Green, and Ha 2010</a>; <a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>; <a href="index.html#ref-whatif" role="doc-biblioref">Hernan and Robins 2023</a>)</span>.</p></li><li id="fn8"><p><sup>8</sup>&nbsp;While going through a bunch of resources from different fields, I came across a suggestion that the direct effect should really be called the unmediated effect (although I was unable to trace back the source). The notion is that the <em>direct effect</em> is no more a direct effect than the residual is a Gaussian error. If there are unspecified mediation pathway(s), the direct effect will subsume those.</p></li></div></div>
<p>The direct effect is: <span id="eq-direct-estimand"><span class="math display">\[
\zeta(t) \equiv \E\big[Y_i(1, M_i(t))\big] - \E\big[Y_i(0, M_i(t))\big], \; t \in \{0, 1\}.
\tag{4}\]</span></span></p>
<p>The indirect effect is: <span id="eq-indirect-estimand"><span class="math display">\[
\delta(t) \equiv \E\big[Y_i(t, M_i(1))\big] - \E\big[Y_i(t, M_i(0))\big], \; t \in \{0, 1\}.
\tag{5}\]</span></span></p>
<p>Varying <span class="math inline">\(t\)</span> gives two different sets of estimands for each of <span class="math inline">\(\delta\)</span> and <span class="math inline">\(\zeta\)</span>.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Set A: ADTE and AITE -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="set-a-adte-and-aite" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="set-a-adte-and-aite">Set A: ADTE and AITE</h2>
<p>The first set of estimands for direct and indirect effects are the average direct treatment effect <span id="eq-adte"><span class="math display">\[
ADTE \equiv \zeta(0) = \underbrace{\E\big[Y(1,M(0))\big] - \E\big[Y(0,M(0))\big]}_{\text{effect of $T$ on $Y$ when $M$ is held at M(T=0)}}
\tag{6}\]</span></span> and the average indirect treatment effect. <span id="eq-aite"><span class="math display">\[
AITE \equiv \delta(1) = \underbrace{\E\big[Y(1,M(1))\big] - \E\big[Y(1,M(0))\big]}_{\text{effect of $M$ on $Y$ when $T=1$}}
\tag{7}\]</span></span></p>
<p>The decomposition of the <code>ATE</code> into the two effects follows directly from <a href="#eq-ate2">Equation&nbsp;<span>3</span></a>:</p>
<div class="column-page">
<p><span class="math display">\[\begin{align}
\underbrace{\E\big[Y(1, M(1))\big] - \E\big[Y(0, M(0))\big]}_{\text{total effect}}
&amp;= \E\big[Y(1, M(1))\big] \underbrace{- \E\big[Y(1,M(0))\big] + \E\big[Y(1,M(0))\big]}_{\text{additive identity}} - \E\big[Y(0, M(0))\big]\\
&amp;= \underbrace{\E\big[Y(1, M(1))\big] - \E\big[Y(1,M(0))\big]}_{\text{AITE}} + \underbrace{\E\big[Y(1,M(0))\big] - \E\big[Y(0, M(0))\big]}_{\text{ADTE}}
\end{align}\]</span></p>
</div>
<div class="page-columns page-full"><p>The <code>AITE</code>, in particular, is also known as the causal mediation effect.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> This decomposition is suitable when there are strong priors about a direct effect but unclear priors on whether an indirect effect also exists. An example could be where <span class="math inline">\(T\)</span> is a STEM degree that raises labor market value <span class="math inline">\(Y\)</span> through some technical competency. On the other hand, it is unclear whether additional benefits also arise through networking with peers <span class="math inline">\(M\)</span>.</p><div class="no-row-height column-margin column-container"><li id="fn9"><p><sup>9</sup>&nbsp;Sometimes <code>ACME</code> <span class="citation" data-cites="Imai2010-fu Imai2010-tg">(average causal mediation effect, <a href="index.html#ref-Imai2010-fu" role="doc-biblioref">K. Imai, Keele, and Yamamoto 2010</a>; <a href="index.html#ref-Imai2010-tg" role="doc-biblioref">Kosuke Imai, Keele, and Tingley 2010</a>)</span>. ADTE is aka the natural direct effect (NDE). AITE is aka the natural indirect effect (NIE). That’s Pearl’s language <span class="citation" data-cites="Pearl2001-ct">(<a href="index.html#ref-Pearl2001-ct" role="doc-biblioref">Pearl 2001</a>)</span>. Another one is pure direct effect and total indirect effect <span class="citation" data-cites="Robins1992-ty whatif">(e.g., <a href="index.html#ref-Robins1992-ty" role="doc-biblioref">Robins and Greenland 1992</a>; <a href="index.html#ref-whatif" role="doc-biblioref">Hernan and Robins 2023</a>)</span>.</p></li></div></div>
<div class="cell page-columns page-full" data-fig-width="270px" data-fig-height="140px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-aite-adte" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="270" height="140" viewbox="0.00 0.00 153.00 116.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>
SetA
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-112 149,-112 149,4 -4,4"></polygon> <!-- TE --> <g id="node1" class="node">
<title>
TE
</title>
<text text-anchor="middle" x="27" y="-48.8" font-family="Times,serif" font-size="14.00">TE</text> </g> <!-- ADTE --> <g id="node2" class="node">
<title>
ADTE
</title>
<text text-anchor="middle" x="118" y="-85.8" font-family="Times,serif" font-size="14.00">ADTE</text> </g> <!-- TE&#45;&gt;ADTE --> <g id="edge1" class="edge">
<title>
TE-&gt;ADTE
</title>
<path fill="none" stroke="black" d="M54.22,-63.9C64,-67.97 75.2,-72.62 85.41,-76.87"></path> <polygon fill="black" stroke="black" points="84.62,-78.81 90.97,-79.18 86.23,-74.93 84.62,-78.81"></polygon> </g> <!-- AITE --> <g id="node3" class="node">
<title>
AITE
</title>
<text text-anchor="middle" x="118" y="-13.8" font-family="Times,serif" font-size="14.00">AITE</text> </g> <!-- TE&#45;&gt;AITE --> <g id="edge2" class="edge">
<title>
TE-&gt;AITE
</title>
<path fill="none" stroke="black" d="M54.22,-42.69C63.91,-38.88 74.99,-34.52 85.13,-30.53"></path> <polygon fill="black" stroke="black" points="86.15,-32.39 90.97,-28.24 84.61,-28.48 86.15,-32.39"></polygon> </g> <!-- ADTE&#45;&gt;AITE --> <g id="edge3" class="edge">
<title>
ADTE-&gt;AITE
</title>
<path fill="none" stroke="white" d="M118,-71.59C118,-60.71 118,-47 118,-36.17"></path> <text text-anchor="middle" x="106.6" y="-49.8" font-family="Times,serif" font-size="14.00">+</text> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;3: Set A: ADTE and AITE. ADTE is <a href="#eq-direct-estimand">Equation&nbsp;<span>4</span></a> with <span class="math inline">\(t = 0\)</span>—holding <span class="math inline">\(m=0\)</span> and asking what is the direct effect of with <span class="math inline">\(T\)</span>. AITE is <a href="#eq-indirect-estimand">Equation&nbsp;<span>5</span></a> with <span class="math inline">\(t=1\)</span>—holding <span class="math inline">\(t=1\)</span> and asking what is the indirect effect with <span class="math inline">\(M\)</span>.</figcaption>
</figure>
</div>
</div></div></div>
<div class="cell page-columns page-full" data-fig-width="270px" data-fig-height="140px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-adtet-aitec" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="270" height="140" viewbox="0.00 0.00 160.88 116.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>
SetB
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-112 156.88,-112 156.88,4 -4,4"></polygon> <!-- TE --> <g id="node1" class="node">
<title>
TE
</title>
<text text-anchor="middle" x="27" y="-48.8" font-family="Times,serif" font-size="14.00">TE</text> </g> <!-- ADTET --> <g id="node2" class="node">
<title>
ADTET
</title>
<text text-anchor="middle" x="121.94" y="-85.8" font-family="Times,serif" font-size="14.00">ADTET</text> </g> <!-- TE&#45;&gt;ADTET --> <g id="edge1" class="edge">
<title>
TE-&gt;ADTET
</title>
<path fill="none" stroke="black" d="M54.38,-63.5C63.98,-67.33 75,-71.71 85.27,-75.8"></path> <polygon fill="black" stroke="black" points="84.53,-77.77 90.88,-78.04 86.09,-73.86 84.53,-77.77"></polygon> </g> <!-- AITEC --> <g id="node3" class="node">
<title>
AITEC
</title>
<text text-anchor="middle" x="121.94" y="-13.8" font-family="Times,serif" font-size="14.00">AITEC</text> </g> <!-- TE&#45;&gt;AITEC --> <g id="edge2" class="edge">
<title>
TE-&gt;AITEC
</title>
<path fill="none" stroke="black" d="M54.38,-43.06C64.62,-39.21 76.46,-34.75 87.29,-30.67"></path> <polygon fill="black" stroke="black" points="88.32,-32.53 93.19,-28.45 86.84,-28.6 88.32,-32.53"></polygon> </g> <!-- ADTET&#45;&gt;AITEC --> <g id="edge3" class="edge">
<title>
ADTET-&gt;AITEC
</title>
<path fill="none" stroke="white" d="M121.94,-71.59C121.94,-60.71 121.94,-47 121.94,-36.17"></path> <text text-anchor="middle" x="110.54" y="-49.8" font-family="Times,serif" font-size="14.00">+</text> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;4: Set B: ADTET and AITEC. ADTET is <a href="#eq-direct-estimand">Equation&nbsp;<span>4</span></a> with <span class="math inline">\(m = 1\)</span>—holding <span class="math inline">\(m=1\)</span> and asking what is the direct effect of with <span class="math inline">\(T\)</span>. AITEC is <a href="#eq-indirect-estimand">Equation&nbsp;<span>5</span></a> with <span class="math inline">\(t=0\)</span>—holding <span class="math inline">\(t=0\)</span> and asking what is the indirect effect with <span class="math inline">\(M\)</span>.</figcaption>
</figure>
</div>
</div></div></div>
<p>Another example could be where <span class="math inline">\(T\)</span> is a dietary program (e.g., a low-whatever-the-frack-is-the-new-fad diet) that lowers diabetic risk <span class="math inline">\(Y\)</span>, but it is unclear if the reduction in diabetic risk also comes from weight loss <span class="math inline">\(M\)</span>. If not, targeting weight loss may be of limited efficacy. This is of practical implication since it informs where and what type of intervention should occur.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Set B: ADTET and AITEC -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="set-b-adtet-and-aitec" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="set-b-adtet-and-aitec">Set B: ADTET and AITEC</h2>
<p>The second set of estimands that decompose the <code>ATE</code> are the average direct treatment effect wrt the treated</p>
<p><span id="eq-adtet"><span class="math display">\[
ADTET \equiv \zeta(1) = \underbrace{\E\big[Y(1,M(1))\big] - \E\big[Y(0, M(1))\big]}_{\text{effect of T when $M$ is held at M(T=1)}}
\tag{8}\]</span></span></p>
<p>and the average indirect treatment effects wrt to controls <span id="eq-aitec"><span class="math display">\[
AITEC \equiv \delta(0) = \underbrace{\E\big[Y(0,M(1))\big] - \E\big[Y(0, M(0))\big]}_{\text{effect of M when $T=0$}}.
\tag{9}\]</span></span></p>
<p>Decompositon again follows directly:</p>
<div class="column-page">
<p><span class="math display">\[
\underbrace{\E\big[Y(1, M(1))\big] - \E\big[Y(0, M(0))\big]}_{\text{total effect}}
= \underbrace{\E\big[Y(1,M(1))\big] - \E\big[Y(0, M(1))\big]}_{\text{ADTET}} + \underbrace{\E\big[Y(0,M(1))\big] - \E\big[Y(0, M(0))\big]}_{\text{AITEC}}.
\]</span></p>
</div>
<p>This decomposition is useful when there are strong priors about an indirect mediating path but unclear priors about a direct effect. An example could be where <span class="math inline">\(T\)</span> is an MBA degree with a weak connection labor market value <span class="math inline">\(Y\)</span> through some technical competency but where benefits mainly arise through networking in the MBA program <span class="math inline">\(M\)</span>.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Classical mediation approach -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="sec-classical-ma" class="level2">
<h2 class="anchored" data-anchor-id="sec-classical-ma">Classical mediation approach</h2>
<p>In the classical mediation approach, in addition to</p>
<p><span class="math display">\[
Y_i = \alpha + \beta T_i + \varepsilon_i,
\]</span></p>
<p>two equations are estimated in a structural equation model<span class="citation" data-cites="Baron1986-zn">(<a href="index.html#ref-Baron1986-zn" role="doc-biblioref">Baron and Kenny 1986</a>)</span>. One modeling T and its effect on M. The other modeling the effect of T and M on Y.</p>
<p><span id="eq-classical-med1"><span class="math display">\[
M_i = \alpha_0 + \alpha_1 T_i + \varepsilon_{1i}
\tag{10}\]</span></span> <span id="eq-classical-med2"><span class="math display">\[
Y_i = \beta_0 + \beta_1 T_i + \beta_2 M_i + \varepsilon_{2i}
\tag{11}\]</span></span></p>
<p><a href="#eq-classical-med1">Equation&nbsp;<span>10</span></a> and <a href="#eq-classical-med2">Equation&nbsp;<span>11</span></a> are estimated separately. The mediation effect is observed via the “product-of-coefficients” method as (<span class="math inline">\(\hat{\alpha_1} \hat{\beta_2}\)</span>)—quite literally the effect of <span class="math inline">\(T\)</span> on <span class="math inline">\(M\)</span> multiplied by the effect of <span class="math inline">\(M\)</span> on <span class="math inline">\(Y\)</span>. The direct effect of <span class="math inline">\(T\)</span> on <span class="math inline">\(Y\)</span> would be observed with <span class="math inline">\(\hat{\beta_1}\)</span>.</p>
<p>The conditional analog of this with a set of covariates <span class="math inline">\(\textbf{X}\)</span> should follow closely <span class="citation" data-cites="Judd1981-rn">(<a href="index.html#ref-Judd1981-rn" role="doc-biblioref">Judd and Kenny 1981</a>)</span>.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Classical mediation approach: Common ground -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="sec-classical-mediation" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-classical-mediation">Classical mediation approach: Common grounds</h2>
<p>How would the causal inference approach with potential outcomes connect to the classical approach?</p>
<p>The reduced form (from <a href="#eq-classical-med1">Equation&nbsp;<span>10</span></a> and <a href="#eq-classical-med2">Equation&nbsp;<span>11</span></a>) is: <span id="eq-sem-rf"><span class="math display">\[
\E\big[Y_i\big|T_i,M_i\big] = \beta_0 + \beta_1 \E[T_i] + \beta_2 \E[M_i].
\tag{12}\]</span></span></p>
<div class="page-columns page-full"><p>Together with the definition of the <code>AITE</code> (<a href="#eq-aite">Equation&nbsp;<span>7</span></a>), this gives <span class="math display">\[\begin{align}
AITE
&amp;=\E\big[Y_i (1, M_i(1))\big] - \E\big[Y_i (1, M_i(0))\big] \\
&amp;=\Big\{
  \beta_0 + \beta_1 (1) + \beta_2 (\alpha_0 + \alpha_1 (1)
\Big\} -
\Big\{
  \beta_0 + \beta_1 (1) + \beta_2 (\alpha_0)
\Big\}\\
&amp;=\Big\{\alpha_0\beta_2 + \alpha_1\beta_2\Big\} - \Big\{\alpha_0\beta_2 \Big\}\\
&amp;=\alpha_1 \beta_2
\end{align}\]</span> which is exactly the same mediation effect proposed by the “product-of-coefficients” from the structural equations above (<a href="#sec-classical-ma"><span>Section&nbsp;6</span></a>).<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn10"><p><sup>10</sup>&nbsp;<a href="#sec-si-classical-mediation"><span>Section&nbsp;14.2</span></a> in the <a href="#supplementary-appendix">Supplementary appendix</a> shows that what falls out from the other three estimands is also consistent with the product of coefficients.</p></li></div></div>
<p>If the classical and causal inference approaches both agree on the underlying intuition of mediation, why use potential outcomes? One reason is it helps clarify what the identification assumptions are.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Biases, bounds, and assumptions -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="sec-bias-bounds-assumptions" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-bias-bounds-assumptions">Biases, bounds, and assumptions</h2>
<p>What we only observe in the real world is <span class="math inline">\([Y_i \big|T = t, M = m]\)</span>, <span class="math inline">\(t \in \{0, 1\}\)</span>, <span class="math inline">\(m \in \{0, 1\}\)</span>. We also only observe actualized potential outcomes <span class="math inline">\(Y(t, m)\)</span> for the corresponding <span class="math inline">\(m\)</span> and <span class="math inline">\(t\)</span> values. The observed difference only converges to <span class="math inline">\(\delta(t)\)</span> (<code>AITE</code>) under certain conditions. The observed difference in a mediated effect, given that treatment is “<code>switched on</code>” <span class="math inline">\(t=1\)</span>, is</p>
<div class="column-page">
<p><span id="eq-med-selection-bias0"><span class="math display">\[
\begin{aligned}
&amp;\E\big[Y\big|T=1, M = 1\big] - \E\big[Y\big|T=1, M=0\big] \\
&amp;=\E\big[Y(1,1)\big|T=1, M=1\big] - \E\big[Y(1,0)\big|T=1, M=0\big] \\
&amp;=\E\big[Y(1,1)\big|M=1\big] - \E\big[Y(1,0)\big|M=0\big]  \qquad\qquad (\text{from }Y_i(t,m) \ind T_i)
\end{aligned}
\tag{13}\]</span></span></p>
</div>
<p>where, even given randomization of <span class="math inline">\(T\)</span> (analogous to <a href="#eq-independence-assumption">Equation&nbsp;<span>2</span></a> in the un-mediated case), the selection issue with <span class="math inline">\(M\)</span> persists. It will carry its own selection bias unless additional assumptions are imposed. The above only reduces to the <code>AITE</code> by imposing additional assumptions on the statistical independence of <span class="math inline">\(M\)</span>,</p>
<div class="column-page">
<p><span id="eq-med-selection-bias"><span class="math display">\[
\begin{aligned}
&amp;\E\big[Y(1,1)\big|M=1\big] - \E\big[Y(1,0)\big|M=0\big]\\
&amp;= \E\big[Y(1,1)\big|M=1\big] - \underbrace{\E\big[Y(1, 0)\big|M=1\big] + \E\big[Y(1, 0)\big|M=1\big]}_{\text{additive identity}} - \E\big[Y(1,0)\big|M=0\big]  \\
&amp;=\underbrace{\E\big[Y(1,1) - Y(1, 0)\Big|M=1\big]}_{\text{analog to AITE}} + \underbrace{\E\big[Y(1, 0)\big|M=1\big] - \E\big[Y(1,0)\big|M=0\big]}_{\text{selection into M}}
\end{aligned}
\tag{14}\]</span></span></p>
</div>
<div class="page-columns page-full"><p>where <span class="math inline">\(E[Y(1, 0)|M=1]\)</span> in the first equality is a counterfactual—what would potential outcome be for people with the <span class="math inline">\(M\)</span> <code>switched off</code> <span class="math inline">\(m=0\)</span> given that it is actually <code>switched on</code> <span class="math inline">\(m=1\)</span> (<em>concrete example</em> later below). The second equality collects terms into the underlying mediation estimand and an <strong>additional bias component</strong>.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn11"><p><sup>11</sup>&nbsp;<a href="#sec-bias-bounds-assumptions-algebra"><span>Section&nbsp;14.3</span></a> in the <a href="#supplementary-appendix">Supplementary appendix</a> offers an alternative algebraic insight of the bias.</p></li></div></div>
<div class="page-columns page-full"><p>There is a tendency for this bias to be positive,<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> and, therefore, overstate the mediation effect. Take, as a <em>concrete example</em>, a case where we are interested in child income <span class="math inline">\(Y\)</span>, parent income <span class="math inline">\(T\)</span>, and college attendance <span class="math inline">\(M\)</span> in a classic case of intergenerational income mobility. Parent income affects child income, but also potentially through access to better education. The expected sign of the AITE should be positive. The first part of the bias is the counterfactual of the potential income of the child of not going to college, given that she did. Conditional on parent income, the child that goes to college should have qualities (non-existent in the child that never goes to college) that would be helpful for labor market success, and, to this extent, suggest that the bias component is <span class="math inline">\(&gt; 0\)</span>. Hence, without intervening in the assignment of <span class="math inline">\(M\)</span>, the estimated mediation effect tends to be biased. But the observed effect may still be useful to provide optimistic <strong>bounds</strong> for the underlying mediation effect.<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn12"><p><sup>12</sup>&nbsp;Or, generally, share the same sign as the AITE.</p></li><li id="fn13"><p><sup>13</sup>&nbsp;This <em>bound</em> is <em>not</em> a statistical property. Instead, the bound is based on counterfactual reasoning about what the plausible potential outcomes are from domain understanding.</p></li></div></div>
<p>The last line in <a href="#eq-med-selection-bias">Equation&nbsp;<span>14</span></a> only reduces to the true <code>AITE</code> by imposing additional <strong>assumptions</strong>.</p>
<p><span id="eq-seq-ignorability1"><span class="math display">\[
\Big\{ Y_i(t, m), M_i(t')\Big\} \ind T_i
\tag{15}\]</span></span> <span id="eq-seq-ignorability2"><span class="math display">\[
\big[Y_i(t', m) \ind M_i(t)\big] \Big| T_i = t
\tag{16}\]</span></span></p>
<div class="page-columns page-full"><p>First, for a causal interpretation, the treatment assignment <span class="math inline">\(T\)</span> has to be statistically orthogonal to the potential outcomes and the potential mediators. This should usually be satisfied with randomization of <span class="math inline">\(T\)</span> as in the usual unmediated case (<a href="#sec-un-mediated-treatment-effects"><span>Section&nbsp;2</span></a>). This assumption was imposed in the last equality of <a href="#eq-med-selection-bias0">Equation&nbsp;<span>13</span></a>. Second, given the actual value <span class="math inline">\(T_i = t\)</span>, the mediator <span class="math inline">\(M\)</span> should be statistically orthogonal to the potential outcome. The standard proposed solution to achieve this is to subject <span class="math inline">\(M\)</span> to experimental manipulation, just as with <span class="math inline">\(T\)</span>.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> The above is the <code>sequential ignorability assumption</code> since the assumptions are made <em>sequentially</em> <span class="citation" data-cites="Imai2010-fu">(<a href="index.html#ref-Imai2010-fu" role="doc-biblioref">K. Imai, Keele, and Yamamoto 2010</a>)</span>.</p><div class="no-row-height column-margin column-container"><li id="fn14"><p><sup>14</sup>&nbsp;<a href="#sec-heterogeneities"><span>Section&nbsp;14.4</span></a> in the <a href="#supplementary-appendix">Supplementary appendix</a> shows an example of how the AITE cannot be identified even with randomization if heterogeneities in effects exist.</p></li></div></div>
<p>In addition, there is a (slightly more subtle) assumption with the common data support <span class="math inline">\(T\)</span> (and <span class="math inline">\(M\)</span>). <span class="math display">\[
\exists \theta &gt; 0: \ \theta \leq \E \left[ T_i = t \right] \leq (1-\theta), \qquad t \in \{0, 1\}
\]</span> With mediation, an additional assumption applies to the mediator: <span class="math display">\[
\exists \eta &gt; 0: \ \eta \leq \E \left[ M_i = m \big| T_i = t \right] \leq (1-\eta), \qquad t \in \{0, 1\}.
\]</span></p>
<p>Loosely speaking, with mediation, twice the identification assumptions are needed.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Mediation and instrumental variables -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="mediation-and-instrumental-variables" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="mediation-and-instrumental-variables">Mediation and instrumental variables</h2>
<div class="cell page-columns page-full" data-fig-width="250px" data-fig-height="100px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-IV" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="250" height="100" viewbox="0.00 0.00 188.00 44.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 40)">
<title>
InstrumentalVariableDesgin
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-40 184,-40 184,4 -4,4"></polygon> <!-- T --> <g id="node1" class="node">
<title>
T
</title>
<ellipse fill="none" stroke="black" cx="18" cy="-18" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="18" y="-15" font-family="Times,serif" font-size="10.00">T</text> </g> <!-- M --> <g id="node2" class="node">
<title>
M
</title>
<ellipse fill="none" stroke="black" cx="90" cy="-18" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="90" y="-15" font-family="Times,serif" font-size="10.00">M</text> </g> <!-- T&#45;&gt;M --> <g id="edge1" class="edge">
<title>
T-&gt;M
</title>
<path fill="none" stroke="black" d="M36.3,-18C45.97,-18 58.07,-18 68.24,-18"></path> <polygon fill="black" stroke="black" points="68.4,-19.23 71.9,-18 68.4,-16.78 68.4,-19.23"></polygon> </g> <!-- Y --> <g id="node3" class="node">
<title>
Y
</title>
<ellipse fill="none" stroke="black" cx="162" cy="-18" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="162" y="-15" font-family="Times,serif" font-size="10.00">Y</text> </g> <!-- M&#45;&gt;Y --> <g id="edge2" class="edge">
<title>
M-&gt;Y
</title>
<path fill="none" stroke="black" d="M108.3,-18C117.54,-18 129.02,-18 138.89,-18"></path> <polygon fill="black" stroke="black" points="138.9,-19.75 143.9,-18 138.9,-16.25 138.9,-19.75"></polygon> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;5: Graph of mediation but ruling out a direct effect from <span class="math inline">\(T\)</span> to <span class="math inline">\(Y\)</span>. Aka the instrumental variables design where canonical assumptions have been established as early as <span class="citation" data-cites="Angrist1996-gx">(<a href="index.html#ref-Angrist1996-gx" role="doc-biblioref">Angrist, Imbens, and Rubin 1996</a>)</span>.</figcaption>
</figure>
</div>
</div></div></div>
<p>What if one thinks that the effect of <span class="math inline">\(T\)</span> should only pass purely through <span class="math inline">\(M\)</span>? In this case, the graph in <a href="#fig-mediation">Figure&nbsp;<span>2</span></a> reduces to <a href="#fig-IV">Figure&nbsp;<span>5</span></a>. This turns out to be the causal graph of the instrumental variables approach. However, the catch now is that the set of identification assumptions changes, with the sequential ignorability (<a href="#eq-seq-ignorability1">Equation&nbsp;<span>15</span></a>, <a href="#eq-seq-ignorability2">Equation&nbsp;<span>16</span></a>) no longer relevant <span class="citation" data-cites="Imai2010-fu">(<a href="index.html#ref-Imai2010-fu" role="doc-biblioref">K. Imai, Keele, and Yamamoto 2010</a>)</span>. Instead, the identification assumptions are those canonically established in the instrumental variable framework, such as that of exclusion restriction <span class="citation" data-cites="Angrist1996-gx">(<a href="index.html#ref-Angrist1996-gx" role="doc-biblioref">Angrist, Imbens, and Rubin 1996</a>)</span>. Moreover, the instrumental variable framework by design a priori rules out other causal mechanisms. This may be less than ideal for many health and social science research <span class="citation" data-cites="Imai2010-fu">(<a href="index.html#ref-Imai2010-fu" role="doc-biblioref">K. Imai, Keele, and Yamamoto 2010</a>)</span>.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Mediation with moderation -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="mediation-with-moderation" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="mediation-with-moderation">Mediation with moderation</h2>
<div class="page-columns page-full"><p>Mediation is not moderation. Mediation allows the treatment <span class="math inline">\(T\)</span> affect the outcome of interest <span class="math inline">\(Y\)</span> through some proposed mediator <span class="math inline">\(M\)</span> indirectly. Moderation, on the other hand, allows for the effect of <span class="math inline">\(T\)</span> to differ by levels of the moderator (e.g., vaccine efficacy differing by age groups).<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> But it turns out the mediation analysis framework also supports moderation with an additional moderating term <span class="math inline">\((M_i \times T_i)\)</span> in <a href="#eq-classical-med2">Equation&nbsp;<span>11</span></a>.</p><div class="no-row-height column-margin column-container"><li id="fn15"><p><sup>15</sup>&nbsp;Regarding temporal ordering, moderators should be pre-exposure baselines (related to colliders/bad controls not covered here), while mediators should be post-exposure. Analyses termed as “mediation analyses”, but where it is impossible for <span class="math inline">\(T\)</span> to influence <span class="math inline">\(M\)</span> because of temporal ordering, are really “third variable analyses” <span class="citation" data-cites="Nguyen2021-oj">(<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">Nguyen, Schmid, and Stuart 2021</a>)</span>. <a href="#sec-trends"><span>Section&nbsp;14.1</span></a> shows a slight trend in “causal mediation analysis” only very recently.</p></li></div></div>
<p><span id="eq-mediator-moderator"><span class="math display">\[
\begin{aligned}
M_i &amp;= \alpha_0 + \alpha_1 T_i + \varepsilon_{1i}\\
Y_i &amp;= \beta_0 + \beta_1 T_i + \beta_2 M_i + \beta_3 M_i T_i + \varepsilon_{2i}
\end{aligned}
\tag{17}\]</span></span></p>
<p>Again, using the definition of the <code>AITE</code> (<a href="#eq-aite">Equation&nbsp;<span>7</span></a>) <span class="math display">\[\begin{align}
&amp;AITE \equiv \delta(1) \\
&amp;=\E\big[Y_i(1,M_i(1))\big] - \E\big[Y_i(1,M_i(0))\big] \\
&amp;=\Big\{\beta_0 + \beta_1 + \beta_2(\alpha_0 + \alpha_1) +\beta_3 (\alpha_0 + \alpha_1) \Big\}
  - \Big\{\beta_0 + \beta_1 + \beta_2(\alpha_0) + \beta_3 (\alpha_0) \Big\}\\
&amp;=\beta_2 \alpha_1 + \beta_3 \alpha_1\\
&amp;=\alpha_1(\beta_2 + \beta_3)
\end{align}\]</span></p>
<p>which is just the effect of <span class="math inline">\(T\)</span> on <span class="math inline">\(M\)</span> (the <span class="math inline">\(\alpha_1\)</span>) multiplied by the coefficients of <span class="math inline">\(M\)</span> in the outcome regression (<span class="math inline">\(\beta_2\)</span> and <span class="math inline">\(\beta_3\)</span>).</p>
<p>So, the mediation framework also directly allows for the mediator to have a role as a moderator. Compared to just <span class="math inline">\(\alpha_1\beta_2\)</span> from <a href="#sec-classical-mediation"><span>Section&nbsp;7</span></a>, the additional <span class="math inline">\(\alpha_1\beta_3\)</span> captures the additional effect, if any, of the mediator <span class="math inline">\(M\)</span> for those individuals in the treatment group <span class="math inline">\(T=1\)</span>. <span class="math inline">\(\alpha_1\beta_3\)</span> is also another way of describing how <span class="math inline">\(M\)</span> moderates the effect of the treatment <span class="math inline">\(T\)</span>. If it turns out <span class="math inline">\(\beta_3 = 0\)</span>, then this implies no moderating relationship exists, and the model reverts to that in <a href="#eq-classical-med2">Equation&nbsp;<span>11</span></a>.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Application example: JOBS II -->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="application-example-jobs-ii" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="application-example-jobs-ii">Application example: JOBS II</h2>
<div class="cell page-columns page-full" data-fig-width="300px" data-fig-height="80px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-JOBSA" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="300" height="80" viewbox="0.00 0.00 300.75 44.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 40)">
<title>
JOBSII
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-40 296.75,-40 296.75,4 -4,4"></polygon> <!-- T --> <g id="node1" class="node">
<title>
T
</title>
<text text-anchor="middle" x="49.81" y="-13.8" font-family="Times,serif" font-size="14.00">JOBS program</text> </g> <!-- Y --> <g id="node2" class="node">
<title>
Y
</title>
<text text-anchor="middle" x="223.12" y="-13.8" font-family="Times,serif" font-size="14.00">Depressive symptoms</text> </g> <!-- T&#45;&gt;Y --> <g id="edge1" class="edge">
<title>
T-&gt;Y
</title>
<path fill="none" stroke="black" d="M99.44,-18C114.2,-18 130.77,-18 146.85,-18"></path> <polygon fill="black" stroke="black" points="147.22,-20.1 153.22,-18 147.22,-15.9 147.22,-20.1"></polygon> <text text-anchor="middle" x="126.55" y="-22.2" font-family="Times,serif" font-size="14.00">-ve</text> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;6: From past studies, participants randomized into treatment groups (<code>JOBS program</code>) have been found to have lower levels of depressive symptoms <span class="citation" data-cites="Vinokur1997-lj">(<a href="index.html#ref-Vinokur1997-lj" role="doc-biblioref">Vinokur and Schul 1997</a>)</span>.</figcaption>
</figure>
</div>
</div></div></div>
<div class="page-columns page-full"><p>To give another concrete example, <span class="citation" data-cites="Imai2010-tg">Kosuke Imai, Keele, and Tingley (<a href="index.html#ref-Imai2010-tg" role="doc-biblioref">2010</a>)</span> (a running reference in this note) use the JOBS II experiment from the psychology literature on (un)employment and mental health (e.g., <span class="citation" data-cites="Vinokur1997-lj">Vinokur and Schul (<a href="index.html#ref-Vinokur1997-lj" role="doc-biblioref">1997</a>)</span>). JOBS (Job Opportunities and Basic Skills training) II is a randomized field experiment. The goal was to identify the effects of a job training intervention on employment status and also on the mental wellbeing of the job seekers.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn16"><p><sup>16</sup>&nbsp;JOBS II had 1,801 participants randomized into treatment and control groups. The treatment group participated in job skills workshops that taught job search skills and coping mechanisms. I.e., they got the <code>JOBS program</code>. For mental wellbeing, the key outcome measure is a continuous measure of <code>depressive symptoms</code> using the Hopkins Symptom Checklist (subscale of 11 items).</p></li></div></div>
<p>An extension of this interest is also to understand mediator factors. Past studies found the program helpful in reducing depressive symptoms (<a href="#fig-JOBSA">Figure&nbsp;<span>6</span></a>). If true, what would be a mediating factor? Credibly identifying mediator factor(s) has implications for future programs. Furthermore, would the mediating factor be moderated by treatment status? This would help identify high-risk subgroups that can be more effectively screened in future programs <span class="citation" data-cites="Vinokur1997-lj">(<a href="index.html#ref-Vinokur1997-lj" role="doc-biblioref">Vinokur and Schul 1997</a>)</span>.</p>
<div class="page-columns page-full"><p>The mediator that is evaluated is <code>job-search self-efficacy</code>.<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a> Importantly, self-efficacy is not randomized, so the second ignorability assumption is not satisfied by design. Instead, baseline covariates measured before the workshops (e.g., education, income, race, marital status, age, sex, previous occupation, and the level of economic hardship) are adjusted for. It turns out that a mediation effect exists. The estimated mediation effect is negative, which implies that JOBS helped reduce depressive symptoms by increasing job-search self-efficacy. The direct effect and the total effects, however, have null estimated effects. Moderating the mediator also yields null estimated effects. <a href="#fig-jobsB">Figure&nbsp;<span>7</span></a> summarizes the relationship.</p><div class="no-row-height column-margin column-container"><li id="fn17"><p><sup>17</sup>&nbsp;Self-efficacy comes from six (five-point scale) items on the degree of confidence in being able to successfully perform six essential job-search activities (e.g., completing job application/resume, using social network to discover promising job openings, getting point across in a job interview; <span class="citation" data-cites="Vinokur1997-lj">Vinokur and Schul (<a href="index.html#ref-Vinokur1997-lj" role="doc-biblioref">1997</a>)</span>).</p></li></div></div>
<div class="cell page-columns page-full" data-fig-width="550px" data-fig-height="200px">
<div class="cell-output-display page-columns page-full">
<div id="fig-jobsB" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<div>
<svg width="550" height="200" viewbox="0.00 0.00 485.08 89.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 85)"> <polygon fill="white" stroke="transparent" points="-4,4 -4,-85 481.08,-85 481.08,4 -4,4"></polygon> <!-- T --> <g id="node1" class="node">
<title>
T
</title>
<text text-anchor="middle" x="52.79" y="-13.5" font-family="Times,serif" font-size="15.00">JOBS program</text> </g> <!-- M --> <g id="node2" class="node">
<title>
M
</title>
<text text-anchor="start" x="184.97" y="-63.5" font-family="Times,serif" font-size="15.00">Job-search </text> <text text-anchor="start" x="177.69" y="-45.5" font-family="Times,serif" font-size="15.00"> self-efficacy </text> </g> <!-- T&#45;&gt;M --> <g id="edge3" class="edge">
<title>
T-&gt;M
</title>
<path fill="none" stroke="black" d="M105.72,-30.97C124.43,-35.65 145.57,-40.93 164.42,-45.64"></path> <polygon fill="black" stroke="black" points="164.39,-47.43 169.67,-46.95 165.24,-44.04 164.39,-47.43"></polygon> <text text-anchor="middle" x="137.64" y="-46.2" font-family="Times,serif" font-size="14.00">+ve*</text> </g> <!-- Y --> <g id="node3" class="node">
<title>
Y
</title>
<text text-anchor="middle" x="403.04" y="-13.5" font-family="Times,serif" font-size="15.00">Depressive symptoms</text> </g> <!-- T&#45;&gt;Y --> <g id="edge2" class="edge">
<title>
T-&gt;Y
</title>
<path fill="none" stroke="black" d="M105.79,-18.24C157.31,-18.48 227.85,-18.8 227.85,-18.8 227.85,-18.8 277.5,-18.57 323.94,-18.36"></path> <polygon fill="black" stroke="black" points="324.01,-20.11 329,-18.34 323.99,-16.61 324.01,-20.11"></polygon> <text text-anchor="middle" x="218.91" y="-6.2" font-family="Times,serif" font-size="14.00">-ve</text> </g> <!-- M&#45;&gt;Y --> <g id="edge1" class="edge">
<title>
M-&gt;Y
</title>
<path fill="none" stroke="black" d="M268.24,-48.12C285.05,-44.34 304.37,-39.99 323.01,-35.79"></path> <polygon fill="black" stroke="black" points="323.83,-37.58 328.77,-34.5 322.98,-33.83 323.83,-37.58"></polygon> <text text-anchor="middle" x="298.57" y="-47.2" font-family="Times,serif" font-size="14.00">-ve*</text> </g> </g>
</svg>
</div>
<figcaption class="figure-caption margin-caption">Figure&nbsp;7: Job-search self-efficacy as a mediating effect: Participants with higher self-efficacy report lower levels of depressive symptoms. The <code>*</code> denotes estimates found to be statistically distinguishable from zero at conventional levels.</figcaption>
</figure>
</div>
</div>
</div>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="endnote" class="level2">
<h2 class="anchored" data-anchor-id="endnote">Endnote</h2>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<p>No new grounds have been broken by me here. This vignette is merely my attempt at parsing and then synthesizing different resources that already exist (some as recent as <span class="citation" data-cites="Stuart2022-bm">Stuart et al. (<a href="index.html#ref-Stuart2022-bm" role="doc-biblioref">2022</a>)</span> in the <a href="https://www.degruyter.com/journal/key/jci/html" target="_blank">Journal of Causal Inference</a>) in order to gain some scientific literacy on (causal) mediation analysis. A lot of studies use mediation to directly imply some kind of directional effect. This clearly alludes to a causal channel. Yet it’s rarely clear what the estimands are or what identification assumptions are needed. This tracks with the exegesis by <span class="citation" data-cites="Bullock2010-vb">Bullock, Green, and Ha (<a href="index.html#ref-Bullock2010-vb" role="doc-biblioref">2010</a>)</span> and <span class="citation" data-cites="Nguyen2021-oj">Nguyen, Schmid, and Stuart (<a href="index.html#ref-Nguyen2021-oj" role="doc-biblioref">2021</a>)</span>. What’s covered here should make things more transparent. If there’s some error you would like to point out or have some comment, feel free to <script type="text/javascript">
<!--
h='&#108;&#x75;&#x63;&#x61;&#x73;&#x73;&#104;&#x65;&#110;&#46;&#x63;&#x6f;&#x6d;';a='&#64;';n='&#108;&#x75;&#x63;&#x61;&#x73;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'" clas'+'s="em' + 'ail">'+'&#114;&#x65;&#x61;&#x63;&#104;&#32;&#x6f;&#x75;&#116;&#32;&#116;&#x6f;&#32;&#x6d;&#x65;'+'<\/'+'a'+'>');
// -->
</script><noscript>reach out to me (lucas at lucasshen dot com)</noscript>. Also, not everything is covered here, but the list of canonical resources should lead to more details.</p>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="resources" class="level2 numbered">
<h2 class="numbered anchored" data-anchor-id="resources">Resources</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-Angrist1996-gx" class="csl-entry" role="listitem">
Angrist, Joshua D, Guido W Imbens, and Donald B Rubin. 1996.
<span>“Identification of Causal Effects Using Instrumental
Variables.”</span> <em>J. Am. Stat. Assoc.</em> 91 (434): 444–55. <a href="https://doi.org/10.2307/2291629">https://doi.org/10.2307/2291629</a>.
</div>
<div id="ref-Angrist2009-oz" class="csl-entry" role="listitem">
Angrist, Joshua D, and Jörn-Steffen Pischke. 2009. <em>Mostly Harmless
Econometrics: An Empiricist’s Companion</em>. Princeton University
Press.
</div>
<div id="ref-Baron1986-zn" class="csl-entry" role="listitem">
Baron, Reuben M, and David A Kenny. 1986. <span>“The Moderator–Mediator
Variable Distinction in Social Psychological Research: Conceptual,
Strategic, and Statistical Considerations.”</span> <em>J. Pers. Soc.
Psychol.</em> 51 (6): 1173–82. <a href="https://doi.org/10.1037/0022-3514.51.6.1173">https://doi.org/10.1037/0022-3514.51.6.1173</a>.
</div>
<div id="ref-Bullock2010-vb" class="csl-entry" role="listitem">
Bullock, John G, Donald P Green, and Shang E Ha. 2010. <span>“Yes, but
What’s the Mechanism? (Don’t Expect an Easy Answer).”</span> <em>J.
Pers. Soc. Psychol.</em> 98 (4): 550–58. <a href="https://doi.org/10.1037/a0018933">https://doi.org/10.1037/a0018933</a>.
</div>
<div id="ref-whatif" class="csl-entry" role="listitem">
Hernan, Miguel A, and James M Robins. 2023. <em>Causal Inference</em>.
CRC Press.
</div>
<div id="ref-Holland1986-yr" class="csl-entry" role="listitem">
Holland, Paul W. 1986. <span>“Statistics and Causal Inference.”</span>
<em>J. Am. Stat. Assoc.</em> 81 (396): 945–60. <a href="https://doi.org/10.2307/2289064">https://doi.org/10.2307/2289064</a>.
</div>
<div id="ref-Imai2010-fu" class="csl-entry" role="listitem">
Imai, K, L Keele, and T Yamamoto. 2010. <span>“Identification, Inference
and Sensitivity Analysis for Causal Mediation Effects.”</span> <a href="https://projecteuclid.org/journals/statistical-science/volume-25/issue-1/Identification-Inference-and-Sensitivity-Analysis-for-Causal-Mediation-Effects/10.1214/10-STS321.short">https://projecteuclid.org/journals/statistical-science/volume-25/issue-1/Identification-Inference-and-Sensitivity-Analysis-for-Causal-Mediation-Effects/10.1214/10-STS321.short</a>.
</div>
<div id="ref-Imai2010-tg" class="csl-entry" role="listitem">
Imai, Kosuke, Luke Keele, and Dustin Tingley. 2010. <span>“A General
Approach to Causal Mediation Analysis.”</span> <em>Psychol. Methods</em>
15 (4): 309–34. <a href="https://doi.org/10.1037/a0020761">https://doi.org/10.1037/a0020761</a>.
</div>
<div id="ref-Imbens2004-tp" class="csl-entry" role="listitem">
Imbens, Guido W. 2004. <span>“Nonparametric Estimation of Average
Treatment Effects Under Exogeneity: A Review.”</span> <em>Rev. Econ.
Stat.</em> 86 (1): 4–29. <a href="https://doi.org/10.1162/003465304323023651">https://doi.org/10.1162/003465304323023651</a>.
</div>
<div id="ref-Judd1981-rn" class="csl-entry" role="listitem">
Judd, Charles M, and David A Kenny. 1981. <span>“Process Analysis:
Estimating Mediation in Treatment Evaluations.”</span> <em>Eval.
Rev.</em> 5 (5): 602–19. <a href="https://doi.org/10.1177/0193841X8100500502">https://doi.org/10.1177/0193841X8100500502</a>.
</div>
<div id="ref-MacKinnon2012-jl" class="csl-entry" role="listitem">
MacKinnon, D. 2012. <span>“Introduction to Statistical Mediation
Analysis.”</span>
</div>
<div id="ref-Nguyen2021-oj" class="csl-entry" role="listitem">
Nguyen, Trang Quynh, Ian Schmid, and Elizabeth A Stuart. 2021.
<span>“Clarifying Causal Mediation Analysis for the Applied Researcher:
Defining Effects Based on What We Want to Learn.”</span> <em>Psychol.
Methods</em> 26 (2): 255–71. <a href="https://doi.org/10.1037/met0000299">https://doi.org/10.1037/met0000299</a>.
</div>
<div id="ref-Pearl2001-ct" class="csl-entry" role="listitem">
Pearl, Judea. 2001. <span>“Direct and Indirect Effects.”</span> In
<em>Proceedings of the Seventeenth Conference on Uncertainty in
Artificial Intelligence</em>, 411–20. UAI’01. San Francisco, CA, USA:
Morgan Kaufmann Publishers Inc. <a href="https://dl.acm.org/doi/10.5555/2074022.2074073">https://dl.acm.org/doi/10.5555/2074022.2074073</a>.
</div>
<div id="ref-Robins1992-ty" class="csl-entry" role="listitem">
Robins, James M, and Sander Greenland. 1992. <span>“Identifiability and
Exchangeability for Direct and Indirect Effects.”</span>
<em>Epidemiology</em> 3 (2): 143–55. <a href="http://www.jstor.org/stable/3702894">http://www.jstor.org/stable/3702894</a>.
</div>
<div id="ref-cmam" class="csl-entry" role="listitem">
StataCorp. 2023. <span>“Mediate — Causal Mediation Analysis.”</span>
<em>Stata Manuals</em>.
</div>
<div id="ref-Stuart2022-bm" class="csl-entry" role="listitem">
Stuart, Elizabeth A, Elizabeth L Ogburn, Ian Schmid, and Trang Quynh
Nguyen. 2022. <span>“Clarifying Causal Mediation Analysis: Effect
Identification via Three Assumptions and Five Potential
Outcomes.”</span> <em>Journal of Causal Inference</em> 10 (1): 246–79.
<a href="https://doi.org/10.1515/jci-2021-0049">https://doi.org/10.1515/jci-2021-0049</a>.
</div>
<div id="ref-Vinokur1997-lj" class="csl-entry" role="listitem">
Vinokur, Amiram D, and Yaacov Schul. 1997. <span>“Mastery and
Inoculation Against Setbacks as Active Ingredients in the
<span>JOBS</span> Intervention for the Unemployed.”</span> <em>J.
Consult. Clin. Psychol.</em> 65 (5): 867–77. <a href="https://doi.org/10.1037/0022-006X.65.5.867">https://doi.org/10.1037/0022-006X.65.5.867</a>.
</div>
</div>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
</section>
<section id="supplementary-appendix" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="supplementary-appendix">Supplementary appendix</h2>
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!------------------------------------------------------------->
<!-- Trends in mediation analysis -->
<!------------------------------------------------------------->
<section id="sec-trends" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sec-trends">Trends in mediation analysis</h3>
<div class="column-page-right">
<div id="fig-pubmed-ma-trends" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assets/figures/pubmed-timeline-mediationanalysisORmediationanalyses.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Trends in mediation analysis. Screenshot of the results from searching PubMed from database inception to end of 2023 for (“mediation analysis”) OR (“mediation analyses”) without any other filters. 13,281 results found which has been trending up since around 2010.</figcaption>
</figure>
</div>
</div>
<div class="column-page-right">
<div id="fig-pubmed-ma-trends" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assets/figures/pubmed-timeline-causalmediationanalysisORcausalmediationanalyses.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;9: Trends in mediation analysis with explicit reference to causality. Screenshot of the results from searching PubMed from database inception to end of 2023 for (“causal mediation analysis”) OR (“causal mediation analyses”) without any other filters. 757 results found which has been trending up since around 2018.</figcaption>
</figure>
</div>
</div>
<!------------------------------------------------------------->
<!-- Classical mediation approach: ADTE, ADTET, AITEC -->
<!------------------------------------------------------------->
</section>
<section id="sec-si-classical-mediation" class="level3">
<h3 class="anchored" data-anchor-id="sec-si-classical-mediation">Classical mediation approach: ADTE, ADTET, AITEC</h3>
<p>Together with the definition of the ADTE (<a href="#eq-aite">Equation&nbsp;<span>7</span></a>), this gives <span class="math display">\[\begin{align}
ADTE = \zeta(0)  
&amp;=\E\big[Y_i (1, M_i(0))\big] - \E\big[Y_i (0, M_i(0))\big] \\
&amp;=\Big\{
  \beta_0 + \beta_1 (1) + \beta_2 (\alpha_0)
\Big\} -   
\Big\{
  \beta_0 + \beta_1 (0) + \beta_2 (\alpha_0)
\Big\}\\
&amp;=\beta_1,
\end{align}\]</span> which is exactly the same <span class="math inline">\(\beta_1\)</span> coefficient in <a href="#eq-classical-med2">Equation&nbsp;<span>11</span></a> capturing the direct effect of <span class="math inline">\(T\)</span> on <span class="math inline">\(Y\)</span>.</p>
<p>If the M is <code>switched on</code> <span class="math inline">\(m=1\)</span>, we get the same result for ADTET (<a href="#eq-adtet">Equation&nbsp;<span>8</span></a>): <span class="math display">\[\begin{align}
ADTET = \zeta(1)  
&amp;=\E\big[Y_i (1, M_i(1))\big] - \E\big[Y_i (0, M_i(1))\big] \\
&amp;=\Big\{
  \beta_0 + \beta_1 (1) + \beta_2 (\alpha_0 + \alpha_1 (1)
\Big\} -
\Big\{
  \beta_0 + \beta_1 (0) + \beta_2 (\alpha_0 + \alpha_1 (1))
\Big\}\\
&amp;=\beta_1.
\end{align}\]</span></p>
<p>The AITEC <a href="#eq-aitec">Equation&nbsp;<span>9</span></a> also reduces to the product-of-coefficients <span class="math inline">\(\alpha_1 \beta_2\)</span>:</p>
<p><span class="math display">\[\begin{align}
AITEC = \delta(0)
&amp;=\E\big[Y_i (0, M_i(1))\big] - \E\big[Y_i (0, M_i(0))\big] \\
&amp;=\Big\{
  \beta_0 + \beta_1 (0) + \beta_2 (\alpha_0 + \alpha_1 (1)
\Big\} -
\Big\{
  \beta_0 + \beta_1 (0) + \beta_2 (\alpha_0)
\Big\}\\
&amp;=\alpha_1 \beta_2.
\end{align}\]</span></p>
<!------------------------------------------------------------->
</section>
<section id="sec-bias-bounds-assumptions-algebra" class="level3">
<h3 class="anchored" data-anchor-id="sec-bias-bounds-assumptions-algebra">Biases, bounds, and assumptions: Algebraic version</h3>
<!------------------------------------------------------------->
<p><span class="citation" data-cites="Bullock2010-vb">Bullock, Green, and Ha (<a href="index.html#ref-Bullock2010-vb" role="doc-biblioref">2010</a>)</span> offer algebraic perspective of the bias seen in <a href="#sec-bias-bounds-assumptions"><span>Section&nbsp;8</span></a>. Starting with the linear structural equation model: <span class="math display">\[\begin{align}
Y_i &amp;= \alpha_1 + \beta_1 T_i + \varepsilon_{1i}\\
M_i &amp;= \alpha_2 + \beta_2 T_i + \varepsilon_{2i}\\
Y_i &amp;= \alpha_3 + \beta_3 T_i + \gamma M_i + \varepsilon_{3i}\\
\end{align}\]</span></p>
<p>The probability limit of the estimated mediated effect <span class="math inline">\(\hat{\gamma}\)</span> <span class="citation" data-cites="Bullock2010-vb">(<a href="index.html#ref-Bullock2010-vb" role="doc-biblioref">Bullock, Green, and Ha 2010</a>)</span> is <span class="math display">\[
\underbrace{\gamma}_{\text{AITE}} + \underbrace{\frac{cov(\varepsilon_{2i}, \varepsilon_{3i})}{var(\varepsilon_{2i})}}_{\text{asymptotic bias}},
\]</span> where <span class="math inline">\(cov(\varepsilon_{2i}, \varepsilon_{3i})\)</span> is the covariance of the error terms in the un-mediated model and the mediated model. So <span class="math inline">\(\hat{\gamma}\)</span> is only consistent if the covariance term reduces to 0, which is unlikely because whatever unmeasured <span class="math inline">\(X_i\)</span> is in <span class="math inline">\(\varepsilon_{2i}\)</span> should also be present in <span class="math inline">\(\varepsilon_{3i}\)</span> (like unmeasured qualities of a good worker in <a href="#sec-bias-bounds-assumptions"><span>Section&nbsp;8</span></a>). Moreover, the sign of <span class="math inline">\(cov(\varepsilon_{2i}, \varepsilon_{3i})\)</span> tend to coincide with the sign of <span class="math inline">\(\gamma\)</span>, leading to the overstatement of the magnitude of the mediation effect <span class="math inline">\(\gamma\)</span>, if any (as discussed in <a href="#sec-bias-bounds-assumptions"><span>Section&nbsp;8</span></a>).</p>
<!------------------------------------------------------------->
</section>
<section id="sec-heterogeneities" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sec-heterogeneities">Heterogeneities in mediation effect</h3>
<!------------------------------------------------------------->
<p>Not as much is said about heterogeneities in mediation effect it seems. <span class="citation" data-cites="Bullock2010-vb">Bullock, Green, and Ha (<a href="index.html#ref-Bullock2010-vb" role="doc-biblioref">2010</a>)</span> does a treatment of this. Apparently, heterogeneities together with the product-of-coefficients method can be problematic, even when <span class="math inline">\(M\)</span> is already subject to experimental intervention.</p>
<p>A similar model to <a href="#eq-classical-med1">Equation&nbsp;<span>10</span></a> and <a href="#eq-classical-med2">Equation&nbsp;<span>11</span></a> with heterogeneities in effect is <span class="math display">\[\begin{align}
M_i &amp;= \alpha_1 + \beta_{1i} T_i + \varepsilon_{1i}\\
Y_i &amp;= \alpha_2 + \beta_{2i} T_i + \gamma_{i} M_i + \varepsilon_{2i}
\end{align}\]</span></p>
<div class="cell page-columns page-full" data-fig-width="300px" data-fig-height="100px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-heterogeneities-A" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="300" height="100" viewbox="0.00 0.00 242.57 83.63" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 79.63)">
<title>
GroupA
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-79.63 238.57,-79.63 238.57,4 -4,4"></polygon> <!-- M --> <g id="node1" class="node">
<title>
M
</title>
<ellipse fill="none" stroke="black" cx="117.27" cy="-56.01" rx="19.75" ry="19.75"></ellipse> <text text-anchor="middle" x="117.27" y="-51.81" font-family="Times,serif" font-size="14.00">M</text> </g> <!-- Y --> <g id="node2" class="node">
<title>
Y
</title>
<ellipse fill="none" stroke="black" cx="216.56" cy="-18.01" rx="18.02" ry="18.02"></ellipse> <text text-anchor="middle" x="216.56" y="-13.81" font-family="Times,serif" font-size="14.00">Y</text> </g> <!-- M&#45;&gt;Y --> <g id="edge1" class="edge">
<title>
M-&gt;Y
</title>
<path fill="none" stroke="black" d="M136.12,-49.04C153.09,-42.41 178.56,-32.46 196.05,-25.63"></path> <polygon fill="black" stroke="black" points="196.63,-26.72 199.44,-24.31 195.74,-24.44 196.63,-26.72"></polygon> <text text-anchor="middle" x="177.05" y="-37.21" font-family="Times,serif" font-size="14.00">2</text> </g> <!-- T --> <g id="node3" class="node">
<title>
T
</title>
<ellipse fill="none" stroke="black" cx="18" cy="-23.01" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="18" y="-18.81" font-family="Times,serif" font-size="14.00">T</text> </g> <!-- T&#45;&gt;M --> <g id="edge3" class="edge">
<title>
T-&gt;M
</title>
<path fill="none" stroke="black" d="M35.5,-28.61C51.86,-34.16 77.01,-42.69 94.9,-48.76"></path> <polygon fill="black" stroke="black" points="94.66,-49.97 98.37,-49.94 95.45,-47.65 94.66,-49.97"></polygon> <text text-anchor="middle" x="57.5" y="-40.21" font-family="Times,serif" font-size="14.00">2</text> </g> <!-- T&#45;&gt;Y --> <g id="edge2" class="edge">
<title>
T-&gt;Y
</title>
<path fill="none" stroke="black" d="M36.27,-22.45C73.68,-21.31 155.55,-18.81 155.55,-18.81 155.55,-18.81 176.93,-18.53 194.37,-18.3"></path> <polygon fill="black" stroke="black" points="194.77,-19.52 198.25,-18.25 194.74,-17.07 194.77,-19.52"></polygon> <text text-anchor="middle" x="117.27" y="-6.21" font-family="Times,serif" font-size="14.00">(direct effect)</text> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;10: Group A’s indirect effect is <span class="math inline">\(4 (= (2)(2))\)</span>. The effect from <span class="math inline">\(T\)</span> to <span class="math inline">\(M\)</span> is 2, and the effect from <span class="math inline">\(M\)</span> to <span class="math inline">\(Y\)</span> is 2. Abstracting away from direct effects.</figcaption>
</figure>
</div>
</div></div></div>
<div class="cell page-columns page-full" data-fig-width="300px" data-fig-height="100px">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-heterogeneities-B" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="300" height="100" viewbox="0.00 0.00 255.39 83.63" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 79.63)">
<title>
GroupB
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-79.63 251.39,-79.63 251.39,4 -4,4"></polygon> <!-- M --> <g id="node1" class="node">
<title>
M
</title>
<ellipse fill="none" stroke="black" cx="125.44" cy="-56.01" rx="19.75" ry="19.75"></ellipse> <text text-anchor="middle" x="125.44" y="-51.81" font-family="Times,serif" font-size="14.00">M</text> </g> <!-- Y --> <g id="node2" class="node">
<title>
Y
</title>
<ellipse fill="none" stroke="black" cx="229.38" cy="-18.01" rx="18.02" ry="18.02"></ellipse> <text text-anchor="middle" x="229.38" y="-13.81" font-family="Times,serif" font-size="14.00">Y</text> </g> <!-- M&#45;&gt;Y --> <g id="edge1" class="edge">
<title>
M-&gt;Y
</title>
<path fill="none" stroke="black" d="M144.19,-49.39C162.16,-42.69 189.89,-32.36 208.56,-25.4"></path> <polygon fill="black" stroke="black" points="209.32,-26.42 212.17,-24.05 208.47,-24.13 209.32,-26.42"></polygon> <text text-anchor="middle" x="187.54" y="-38.21" font-family="Times,serif" font-size="14.00">-1</text> </g> <!-- T --> <g id="node3" class="node">
<title>
T
</title>
<ellipse fill="none" stroke="black" cx="18" cy="-23.01" rx="18" ry="18"></ellipse> <text text-anchor="middle" x="18" y="-18.81" font-family="Times,serif" font-size="14.00">T</text> </g> <!-- T&#45;&gt;M --> <g id="edge3" class="edge">
<title>
T-&gt;M
</title>
<path fill="none" stroke="black" d="M35.47,-28.17C53.65,-33.86 82.97,-43.03 102.94,-49.28"></path> <polygon fill="black" stroke="black" points="102.61,-50.46 106.31,-50.34 103.34,-48.12 102.61,-50.46"></polygon> <text text-anchor="middle" x="61.58" y="-42.21" font-family="Times,serif" font-size="14.00"> -3</text> </g> <!-- T&#45;&gt;Y --> <g id="edge2" class="edge">
<title>
T-&gt;Y
</title>
<path fill="none" stroke="black" d="M36.16,-22.49C75.22,-21.36 163.71,-18.81 163.71,-18.81 163.71,-18.81 188.27,-18.51 207.36,-18.28"></path> <polygon fill="black" stroke="black" points="207.61,-19.5 211.09,-18.23 207.58,-17.05 207.61,-19.5"></polygon> <text text-anchor="middle" x="125.44" y="-6.21" font-family="Times,serif" font-size="14.00">(direct effect)</text> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;11: Group B’s indirect effect is <span class="math inline">\(3 (= (-3)(-1))\)</span>. The effect from <span class="math inline">\(T\)</span> to <span class="math inline">\(M\)</span> is -3, and the effect from <span class="math inline">\(M\)</span> to <span class="math inline">\(Y\)</span> is -1. Abstracting away from direct effects.</figcaption>
</figure>
</div>
</div></div></div>
<p>To see why heterogeneity could be bad without simulations, suppose we know that the true effects for two groups, A and B (equal proportions), are as follow: <span class="math display">\[\begin{align}
\beta_{1A} &amp;= 2\\
\gamma_{A} &amp;= 2
\end{align}\]</span> and <span class="math display">\[\begin{align}
\beta_{1B} &amp;= -3\\
\gamma_{B} &amp;= -1.
\end{align}\]</span></p>
<p>The mediation effect for group A is <span class="math inline">\(\beta_{1A}\gamma_A = 4\)</span> and for group B it is <span class="math inline">\(\beta_{1B}\gamma_B = 3\)</span>. So the average of the two (given equal group proportion) is <span class="math inline">\(\frac{4+3}{2} = 3.5\)</span>.</p>
<p>But conventional estimate will not give <span class="math inline">\(3.5\)</span>. This is because <span class="math display">\[
\bar{\beta_i} = \frac{\beta_{1A}+\beta_{1B}}{2} = \frac{2 - 3}{2} = -0.5
\]</span> and <span class="math display">\[
\bar{\gamma} = \frac{\gamma_{A}+\gamma_{B}}{2} = \frac{2-1}{2} = 0.5
\]</span> The conventional estimate from product of coefficients is <span class="math inline">\(-0.25\)</span> (<span class="math inline">\(\neq3.5\)</span>). This resembles basic probability where</p>
<p><span class="math display">\[
\E\big[\beta_{1i}\big]\E\big[\gamma_i\big] = \E\big[\beta_{1i} \gamma_i\big] - \underbrace{cov(\beta_{1i}, \gamma_i)}_{\neq 0}
\]</span> so the product of the averages do not equal the average of the product unless that additional covariance term is zero. So even if <span class="math inline">\(M\)</span> has been randomized, we still cannot identify the AITE (mediation effect) if heterogeneities exist <span class="citation" data-cites="Bullock2010-vb">(<a href="index.html#ref-Bullock2010-vb" role="doc-biblioref">Bullock, Green, and Ha 2010</a>)</span>.</p>
<!------------------------------------------------------------->
<!-- Mediation with moderation: Direct effect -->
<!------------------------------------------------------------->
</section>
<section id="mediation-with-moderation-direct-effect" class="level3">
<h3 class="anchored" data-anchor-id="mediation-with-moderation-direct-effect">Mediation with moderation: Direct effect</h3>
<p>With moderation (as specified in <a href="#eq-mediator-moderator">Equation&nbsp;<span>17</span></a>), and from the definition of the <code>ADTE</code> (<span class="math inline">\(\zeta(1)\)</span> from <a href="#eq-direct-estimand">Equation&nbsp;<span>4</span></a>):</p>
<p><span class="math display">\[\begin{align}
&amp;ADTE \equiv \zeta(1) \\
&amp;=\E\big[Y_i(1,M_i(0))\big] - \E\big[Y_i(0,M_i(0))\big] \\
&amp;=\Big\{\beta_0 + \beta_1 + \beta_2(\E[M|T=0]) +\beta_3 (\E[M|T=0]) \Big\}
  - \Big\{\beta_0 + \beta_2(\E[M|T=0])  \Big\}\\
&amp;= \beta_1 + \alpha_0\beta_3.
\end{align}\]</span></p>
<p>So the <code>ADTE</code> is the effect of <span class="math inline">\(T\)</span> on <span class="math inline">\(Y\)</span> and an additional effect which is the product of a constant for <span class="math inline">\(M\)</span> and its effect moderated with <span class="math inline">\(T\)</span>. If no moderation exist (i.e., <span class="math inline">\(\beta_3=0\)</span>), then the above reduces to just <span class="math inline">\(\beta_1\)</span> as in <a href="#sec-si-classical-mediation"><span>Section&nbsp;14.2</span></a>. In other words, mediation with moderation (allowing for the interaction of the mediator and treatment status) is the general case. No allowing for interactions is the special case.</p>


</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://www.lucasshen.com">© Copyright 2023, Lucas Shen</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>